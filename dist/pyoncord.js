"use strict";(()=>{var ge=Object.defineProperty;var i=(t,e)=>()=>(t&&(e=t(t=0)),e);var d=(t,e)=>{for(var n in e)ge(t,n,{get:e[n],enumerable:!0})};function x(t){let e=function(){};return e[$]=function(){return e[he]??=t()},new Proxy(e,ye)}var $,he,Dt,Ct,ye,at=i(()=>{"use strict";$=Symbol("lazyFactory"),he=Symbol("lazyCache"),Dt=["arguments","caller","prototype"],Ct=function(t){return typeof t=="string"&&Dt.includes(t)},ye={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(t){return[t,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Reflect[t](e[$](),...r)}]})),ownKeys:function(t){let e=Reflect.ownKeys(t[$]());return Dt.forEach(function(n){return Ct(n)&&e.push(n)}),e},getOwnPropertyDescriptor:function(t,e){if(Ct(e))return Reflect.getOwnPropertyDescriptor(t,e);let n=Reflect.getOwnPropertyDescriptor(t[$](),e);return n&&Object.defineProperty(t,e,n),n}}});var Bt,b,W=i(()=>{Bt=["a","b","i"],b=new Map});function Nt(t,e,n,r,o){let a=b.get(e)?.[t];if(!a)return o?Reflect.construct(e[t],n,r):e[t].apply(r,n);for(let c of a.b.values()){let u=c.call(r,n);Array.isArray(u)&&(n=u)}let s=function(){for(var c=arguments.length,u=new Array(c),f=0;f<c;f++)u[f]=arguments[f];return o?Reflect.construct(a.o,u,r):a.o.apply(r,u)};for(let c of a.i.values()){let u=s;s=function(){for(var f=arguments.length,S=new Array(f),p=0;p<f;p++)S[p]=arguments[p];return c.call(r,S,u)}}let l=s(...n);for(let c of a.a.values())l=c.call(r,n,l)??l;return l}var Mt=i(()=>{W()});function Lt(t,e,n,r){let o=b.get(t),a=o?.[e];return a?.[r].has(n)?(a[r].delete(n),Bt.every(function(s){return a[s].size===0})&&(Reflect.defineProperty(t,e,{value:a.o,writable:!0,configurable:!0})||(t[e]=a.o),delete o[e]),Object.keys(o).length==0&&b.delete(t),!0):!1}var it=i(()=>{W()});function X(t){return function(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof n[e]!="function")throw new Error(`${e} is not a function in ${n.constructor.name}`);b.has(n)||b.set(n,{});let a=b.get(n);if(!a[e]){let c=n[e];a[e]={o:c,b:new Map,i:new Map,a:new Map};let u=function(p,E,N){let me=Nt(e,n,E,p,N);return o&&l(),me},f=new Proxy(c,{apply:function(p,E,N){return u(E,N,!1)},construct:function(p,E){return u(c,E,!0)},get:function(p,E,N){return E=="toString"?c.toString.bind(c):Reflect.get(p,E,N)}});Reflect.defineProperty(n,e,{value:f,configurable:!0,writable:!0})||(n[e]=f)}let s=Symbol(),l=function(){return Lt(n,e,s,t)};return a[e][t].set(s,r),l}}var Ft=i(()=>{Mt();W();it()});var zt,Ut,K,ct=i(()=>{Ft();it();zt=X("b"),Ut=X("i"),K=X("a")});var ut={};d(ut,{AssetManager:()=>M,Colors:()=>m,Constants:()=>L,Forms:()=>T,I18n:()=>Z,NavigationNative:()=>J,Styles:()=>st});var M,Z,T,J,st,m,L,A=i(()=>{"use strict";h();M=R("getAssetByID"),Z=v("Messages"),T=v("FormSection"),J=v("NavigationContainer"),st=v("createThemedStyleSheet"),m=v("unsafe_rawColors"),L=v("NODE_SIZE")});var ft={};d(ft,{common:()=>ut,factoryCallbacks:()=>P,findByDisplayName:()=>Vt,findByDisplayNameLazy:()=>_e,findByName:()=>kt,findByNameLazy:()=>be,findByProps:()=>R,findByPropsLazy:()=>v,findByStoreName:()=>Yt,findByStoreNameLazy:()=>q,findInitializedModule:()=>O,findLazy:()=>xe,getInitializedModules:()=>Ht,patchFactories:()=>lt,waitForModule:()=>y});function jt(t){return t==null||t===globalThis||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||t["whar???"]===null}function we(t){Object.defineProperty(modules,t,{value:modules[t],enumerable:!1,configurable:!0,writable:!0})}function lt(){for(let t in modules){let e=modules[t];e.factory&&K("factory",e,function(n){let{5:r}=n;jt(r)||P.forEach(function(o){return o(r)})},!0)}}function*Ht(){for(let t in modules)if(modules[t].isInitialized){if(jt(modules[t].publicModule.exports)){we(t);continue}yield modules[t].publicModule}}function y(t,e){let n=function(r){r.default&&r.__esModule&&t(r.default)&&(P.delete(n),e(r.default)),t(r)&&(P.delete(n),e(r))};return P.add(n),function(){return P.delete(n)}}function O(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;for(let{exports:n}of Ht()){if(n?.default&&n.__esModule&&t(n.default))return e?n.default:n;if(t(n))return n}}function xe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return x(function(){return O(t,e)})}function R(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O(function(r){return e.every(function(o){return r?.[o]})})}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return x(function(){return R(...e)})}function kt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.name===t},e)}function be(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return x(function(){return kt(t,e)})}function Vt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.displayName===t},e)}function _e(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return x(function(){return Vt(t,e)})}function Yt(t){return O(function(e){return e?.getName?.()===t})}function q(t){return x(function(){return Yt(t)})}var P,h=i(()=>{"use strict";at();ct();A();P=new Set});function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var pt=i(()=>{});function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function tt(t,e,n){return e&&Gt(t.prototype,e),n&&Gt(t,n),t}var dt=i(()=>{});function w(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt=i(()=>{});var gt={};d(gt,{default:()=>g,patchesInstances:()=>et});var et,g,I=i(()=>{"use strict";pt();dt();mt();ct();et=new Map,g=function(){"use strict";function t(e){var n=this;if(Q(this,t),w(this,"identifier",void 0),w(this,"patches",[]),w(this,"stopped",!1),w(this,"before",function(r,o,a){return n.addUnpatcher(zt(o,r,a))}),w(this,"after",function(r,o,a){return n.addUnpatcher(K(o,r,a))}),w(this,"instead",function(r,o,a){return n.addUnpatcher(Ut(o,r,a))}),w(this,"addUnpatcher",function(r){if(n.stopped)return function(){return!1};if(typeof r!="function")throw new Error("Unpatcher must be a function");return n.patches.push(r),r}),!e||typeof e!="string")throw new Error("Patcher identifier must be a non-empty string");if(et.has(e))throw new Error(`Patcher with identifier "${e}" already exists`);this.identifier=e,et.set(e,this)}return tt(t,[{key:"unpatchAllAndStop",value:function(){let n=!0;this.stopped=!0;for(let r of this.patches)try{if(r?.()===!1)throw void 0}catch{n=!1}return et.delete(this.identifier),n}}]),t}()});var ht={};d(ht,{connectToDebugger:()=>nt});async function nt(){if(_)return;_=new WebSocket("ws://localhost:9090/"),_.addEventListener("open",function(){return console.log("Connected to debug websocket")}),_.addEventListener("error",function(e){return console.error(e.message)}),_.addEventListener("message",function(e){try{new ve(`return (${e.data})`)().then(console.log).catch(console.error)}catch(n){console.error(n)}});let t=Ee(globalThis,"nativeLoggingHook",function(e){let[n,r]=e;_?.readyState===WebSocket.OPEN&&_.send(JSON.stringify({level:r,message:n}))});_.addEventListener("close",function(){t(),_=null,setTimeout(nt,3e3)})}var Ee,_,ve,yt=i(()=>{"use strict";I();({before:Ee}=new g("debug-ws-patcher")),_=null,ve=Object.getPrototypeOf(async function(){}).constructor});async function F(){let t,e,n=y(function(r){return typeof r?.defaultProps?.hideGiftButton=="boolean"},function(r){e=r,{hideGiftButton:t}=r.defaultProps,r.defaultProps.hideGiftButton=!0});return function(){return t!==void 0?e.defaultProps.hideGiftButton=t:n()}}var $t=i(()=>{"use strict";h()});var C={};d(C,{getAssetByID:()=>Ie,getAssetByName:()=>Re,getAssetIDByName:()=>xt,patchAssets:()=>wt,registeredAssets:()=>z});function wt(){let t=Se(M,"registerAsset",function(r,o){let[a]=r;z[a.name]={...a,id:o}}),e,n=1;for(;e=M.getAssetByID(n);)z[e.name]??={...e,id:n++};return t}var Se,z,Re,Ie,xt,rt=i(()=>{"use strict";I();A();({after:Se}=new g("assets-patcher")),z={};Re=function(t){return z[t]},Ie=function(t){return M.getAssetByID(t)},xt=function(t){return z[t]?.id}});function U(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return new Promise(function(n){let r=setInterval(function(){t()&&(clearInterval(r),n())},e)})}var Wt=i(()=>{"use strict"});var Xt,Kt=i(()=>{"use strict";pt();dt();mt();Xt=function(){"use strict";function t(){Q(this,t),w(this,"events",new Map)}return tt(t,[{key:"on",value:function(n,r){this.events.get(n)?.add(r)||this.events.set(n,new Set([r]))}},{key:"emit",value:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];let s=this.events.get(n);s&&s.forEach(function(l){l(...o)})}},{key:"off",value:function(n,r){let o=this.events.get(n);o&&(o.delete(r),o.size===0&&this.events.delete(n))}}]),t}()});function D(t,e){return j(t,e,{walkable:["props","children","child","sibling"]})}var Zt=i(()=>{"use strict";H()});function bt(t,e,n,r){if(!(r>n.maxDepth)&&t){try{if(e(t))return t}catch{}if(Array.isArray(t)){for(let o of t)if(!(typeof o!="object"||o===null))try{let a=bt(o,e,n,r+1);if(a)return a}catch{}}else if(typeof t=="object"){for(let o of Object.keys(t))if(!(typeof t[o]!="object"||t[o]===null)&&!(n.walkable.length&&!n.walkable.includes(o))&&!n.ignore.includes(o))try{let a=bt(t[o],e,n,r+1);if(a)return a}catch{}}}}function j(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return bt(t,e,{walkable:[],ignore:[],maxDepth:100,...n},0)}var Jt=i(()=>{"use strict"});async function B(t,e,n,r){let o=await e.then(function(a){return a.default});typeof n=="string"&&(n={title:n}),t.navigate("PyoncordCustomPage",{...n,render:function(){return React.createElement(o,r)}})}var qt=i(()=>{"use strict"});var _t={};d(_t,{EventEmitter:()=>Xt,assets:()=>C,awaitUntil:()=>U,findInReactTree:()=>D,findInTree:()=>j,lazyNavigate:()=>B,proxyLazy:()=>x});var H=i(()=>{"use strict";rt();Wt();Kt();Zt();Jt();qt();at()});async function k(){try{await U(function(){return Et.getCurrentUser?.()}),Et.getCurrentUser().flags|=1,Et._dispatcher._actionHandlers._computeOrderedActionHandlers("OVERLAY_INITIALIZE").forEach(function(t){let{name:e,actionHandler:n}=t;e.includes?.("Experiment")&&n?.({serializedExperimentStore:Te.getSerializedState(),user:{flags:1}})})}catch(t){console.error("An error occurred while patching experiments",t)}}var Et,Te,Qt=i(()=>{"use strict";h();H();Et=q("UserStore"),Te=q("ExperimentStore")});function V(){let t=y(function(e){return e?.dispatch&&e._actionHandlers?._orderedActionHandlers},function(e){te.before(e,"dispatch",function(n){if(n[0].type==="IDLE")return[{type:"THIS_TYPE_DOES_NOT_EXIST"}]})});return function(){return t(),te.unpatchAllAndStop()}}var te,ee=i(()=>{"use strict";I();h();te=new g("idle-patcher")});var re={};d(re,{default:()=>ne});function ne(){return React.createElement(Ae,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Pe,{title:"Settings",titleStyleType:"no_border"},React.createElement(Ce,{label:"Trigger Discord's experiments menu",subLabel:"Enables the experiments menu in Discord's settings, which only staff has access to.",leading:React.createElement(Oe.Icon,{source:xt("ic_badge_staff")}),value:!0,onValueChange:function(){}})))}var Ae,Pe,Oe,Ce,oe=i(()=>{"use strict";A();rt();({ScrollView:Ae}=ReactNative),{FormSection:Pe,FormRow:Oe,FormSwitchRow:Ce}=T});var ot,ae=i(()=>{"use strict";A();ot=st.createThemedStyleSheet({container:{flex:1},list:{paddingVertical:14,paddingHorizontal:8},card:{borderRadius:10,margin:5,backgroundColor:m.colors.BACKGROUND_TERTIARY},header:{flexDirection:"row",flexWrap:"wrap"},bodyCard:{backgroundColor:m.colors.BACKGROUND_SECONDARY,borderBottomLeftRadius:10,borderBottomRightRadius:10},bodyText:{color:m.colors.TEXT_NORMAL,paddingHorizontal:16,paddingTop:10,paddingBottom:18,textAlignVertical:"top"},actions:{justifyContent:"flex-start",flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:12,paddingBottom:10},iconsContainer:{flexDirection:"row",justifyContent:"flex-start"},icons:{width:24,height:24,marginHorizontal:4,tintColor:m.colors.INTERACTIVE_NORMAL},headerText:{fontFamily:L.Fonts.PRIMARY_SEMIBOLD,color:m.colors.TEXT_NORMAL,fontSize:16},link:{color:m.colors.TEXT_LINK},emptyPageImage:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",marginTop:"10%"},emptyPageText:{marginTop:10,color:m.colors.TEXT_NORMAL,fontFamily:L.Fonts.PRIMARY_SEMIBOLD,textAlign:"center"},search:{margin:0,marginBottom:0,paddingBottom:5,paddingRight:15,paddingLeft:15,backgroundColor:"none",borderBottomWidth:0,background:"none"},button:{height:34,paddingHorizontal:16,marginLeft:6},buttonIcon:{width:14,height:14,marginRight:6,color:m.colors.TEXT_NORMAL},invalidHeader:{flexDirection:"column",flexWrap:"wrap"},invalidInfoText:{color:m.colors.TEXT_MUTED,fontSize:12,fontWeight:"400"},warningText:{color:m.colors.TEXT_WARNING,fontFamily:L.Fonts.PRIMARY_NORMAL,fontSize:12,paddingTop:5}})});var ce={};d(ce,{default:()=>ie});function ie(){return React.createElement(Ne,{style:ot.container},React.createElement(De,{style:ot.emptyPageImage},React.createElement(Be,{style:ot.emptyPageText},"Plugin system coming soon (never).")))}var De,Be,Ne,se=i(()=>{"use strict";ae();({View:De,Text:Be,ScrollView:Ne}=ReactNative)});function Me(){let{FormSection:t,FormRow:e,FormIcon:n}=T,r=J.useNavigation(),o="Pyoncord (e3b7f59) ".trimEnd();return React.createElement(t,{key:"Pyoncord",title:o},React.createElement(e,{label:"Pyoncord",leading:React.createElement(n,{source:C.getAssetIDByName("Discord")}),trailing:e.Arrow,onPress:function(){return B(r,Promise.resolve().then(()=>(oe(),re)),"Pyoncord")}}),React.createElement(e,{label:"Plugins",leading:React.createElement(n,{source:C.getAssetIDByName("Discord")}),trailing:e.Arrow,onPress:function(){return B(r,Promise.resolve().then(()=>(se(),ce)),"Plugins")}}))}function G(){let t=y(function(n){return n.default?.name==="getScreens"},function(n){Y.after(n,"default",function(r,o){return Object.assign(o,{PyoncordCustomPage:{title:"Pyoncord",render:function(a){let{render:s,...l}=a,c=J.useNavigation();return React.useEffect(function(){c.setOptions({...l})},[]),React.createElement(s,null)}}})})}),e=y(function(n){return n.default?.name==="UserSettingsOverviewWrapper"},function(n){let r=Y.after(n,"default",function(o,a){let s=D(a.props.children,function(l){return l.type?.name==="UserSettingsOverview"});Y.after(s.type.prototype,"renderSupportAndAcknowledgements",function(l,c){let{props:{children:u}}=c;try{let f=u.findIndex(function(S){return S?.type?.name==="UploadLogsButton"});f!==-1&&u.splice(f,1)}catch{}}),Y.after(s.type.prototype,"render",function(l,c){try{let u=[Z.Messages.BILLING_SETTINGS,Z.Messages.PREMIUM_SETTINGS],f=D(c.props.children,function(p){return p?.children?.[1]?.type===T.FormSection}).children,S=f.findIndex(function(p){return u.includes(p?.props.label)});f.splice(-~S||4,0,React.createElement(Me,null))}catch(u){console.error("An error occurred while trying to append Pyoncord's settings section. "+u?.stack)}}),r()})});return function(){t(),e(),Y.unpatchAllAndStop()}}var Y,ue=i(()=>{"use strict";I();h();A();H();Y=new g("settings-patcher")});var St={};d(St,{getCurrentTheme:()=>vt});function vt(){throw new Error("Not implemented")}var Rt=i(()=>{"use strict"});async function Tt(){}var It,le=i(()=>{"use strict";I();h();Rt();It=new g("theme-patcher")});var At={};d(At,{patchChatInput:()=>F,patchExperiments:()=>k,patchIdle:()=>V,patchSettings:()=>G,patchTheme:()=>Tt});var Pt=i(()=>{"use strict";$t();Qt();ee();ue();le()});var Ot={};d(Ot,{Patcher:()=>gt});var fe=i(()=>{"use strict";I()});var pe={};d(pe,{api:()=>Ot,debug:()=>ht,default:()=>Le,metro:()=>ft,patches:()=>At,themes:()=>St,utils:()=>_t});async function Le(){lt(),nt();let t=[wt(),k(),F(),V(),G()];return await Promise.all(t),function(){console.log("Unloading Pyoncord..."),t.forEach(async function(e){return(await e)?.()})}}var de=i(()=>{"use strict";yt();h();Pt();rt();fe();yt();h();Pt();Rt();H()});h();console.log(`Pyon! (Pyoncord, hash=e3b7f59, dev=${!1})`);async function Fe(){try{window.React=R("createElement"),window.ReactNative=R("View"),window.pyoncord={...await Promise.resolve().then(()=>(de(),pe))},pyoncord.unload=await pyoncord.default(),delete pyoncord.default}catch(t){t=t?.stack??t,alert([`Failed to load Pyoncord.
`,"Build Hash: e3b7f59",`Debug Build: ${!1}`,`Build Number: ${nativeModuleProxy.RTNClientInfoManager?.Build}`,t].join(`
`)),console.error(t)}}Fe();})();
//# sourceURL=pyoncord
