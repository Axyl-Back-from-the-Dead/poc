"use strict";(()=>{var ne=Object.defineProperty;var c=(t,e)=>()=>(t&&(e=t(t=0)),e);var v=(t,e)=>{for(var n in e)ne(t,n,{get:e[n],enumerable:!0})};function j(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Q=c(()=>{});function Et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function St(t,e,n){return e&&Et(t.prototype,e),n&&Et(t,n),t}var Pt=c(()=>{});function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var tt=c(()=>{});var U,et=c(()=>{"use strict";Q();Pt();tt();U=function(){"use strict";function t(){j(this,t),d(this,"events",new Map)}return St(t,[{key:"on",value:function(n,r){this.events.get(n)?.add(r)||this.events.set(n,new Set([r]))}},{key:"emit",value:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];let a=this.events.get(n);a&&a.forEach(function(u){u(...o)})}},{key:"off",value:function(n,r){let o=this.events.get(n);o&&(o.delete(r),o.size===0&&this.events.delete(n))}}]),t}()});function y(t){let e=function(){};return e[H]=function(){return e[re]??=t()},new Proxy(e,oe)}var H,re,Ot,It,oe,nt=c(()=>{"use strict";H=Symbol("lazyFactory"),re=Symbol("lazyCache"),Ot=["arguments","caller","prototype"],It=function(t){return typeof t=="string"&&Ot.includes(t)},oe={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(t){return[t,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Reflect[t](e[H](),...r)}]})),ownKeys:function(t){let e=Reflect.ownKeys(t[H]());return Ot.forEach(function(n){return It(n)&&e.push(n)}),e},getOwnPropertyDescriptor:function(t,e){if(It(e))return Reflect.getOwnPropertyDescriptor(t,e);let n=Reflect.getOwnPropertyDescriptor(t[H](),e);return n&&Object.defineProperty(t,e,n),n}}});var At,w,k=c(()=>{At=["a","b","i"],w=new Map});function Rt(t,e,n,r,o){let i=w.get(e)?.[t];if(!i)return o?Reflect.construct(e[t],n,r):e[t].apply(r,n);for(let s of i.b.values()){let f=s.call(r,n);Array.isArray(f)&&(n=f)}let a=function(){for(var s=arguments.length,f=new Array(s),l=0;l<s;l++)f[l]=arguments[l];return o?Reflect.construct(i.o,f,r):i.o.apply(r,f)};for(let s of i.i.values()){let f=a;a=function(){for(var l=arguments.length,_=new Array(l),p=0;p<l;p++)_[p]=arguments[p];return s.call(r,_,f)}}let u=a(...n);for(let s of i.a.values())u=s.call(r,n,u)??u;return u}var Tt=c(()=>{k()});function Dt(t,e,n,r){let o=w.get(t),i=o?.[e];return i?.[r].has(n)?(i[r].delete(n),At.every(function(a){return i[a].size===0})&&(Reflect.defineProperty(t,e,{value:i.o,writable:!0,configurable:!0})||(t[e]=i.o),delete o[e]),Object.keys(o).length==0&&w.delete(t),!0):!1}var rt=c(()=>{k()});function $(t){return function(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof n[e]!="function")throw new Error(`${e} is not a function in ${n.constructor.name}`);w.has(n)||w.set(n,{});let i=w.get(n);if(!i[e]){let s=n[e];i[e]={o:s,b:new Map,i:new Map,a:new Map};let f=function(p,b,A){let ee=Rt(e,n,b,p,A);return o&&u(),ee},l=new Proxy(s,{apply:function(p,b,A){return f(b,A,!1)},construct:function(p,b){return f(s,b,!0)},get:function(p,b,A){return b=="toString"?s.toString.bind(s):Reflect.get(p,b,A)}});Reflect.defineProperty(n,e,{value:l,configurable:!0,writable:!0})||(n[e]=l)}let a=Symbol(),u=function(){return Dt(n,e,a,t)};return i[e][t].set(a,r),u}}var Bt=c(()=>{Tt();k();rt()});var Ct,G,Mt,ot=c(()=>{Bt();rt();Ct=$("b"),G=$("i"),Mt=$("a")});var at={};v(at,{findByDisplayName:()=>zt,findByDisplayNameLazy:()=>ce,findByName:()=>Ft,findByNameLazy:()=>ae,findByProps:()=>E,findByPropsLazy:()=>R,findByStoreName:()=>Lt,findByStoreNameLazy:()=>V,findInitializedModule:()=>I,findLazy:()=>ie,getInitializedModules:()=>Nt,moduleLoadEvent:()=>P,patchFactories:()=>it,waitForModule:()=>h});function it(){for(let t in modules){let e=modules[t];e.factory&&G("factory",e,function(n,r){r(...n),e.dependencyMap=n[6],P.emit("export",n[5])})}}function*Nt(){for(let t in modules)modules[t].isInitialized&&(yield modules[t].publicModule)}function h(t,e){let n=function(r){r.default&&r.__esModule&&t(r.default)&&(P.off("export",n),e(r.default)),t(r)&&(P.off("export",n),e(r))};return P.on("export",n),function(){return P.off("export",n)}}function I(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;for(let{exports:n}of Nt()){if(n?.default&&n.__esModule&&t(n.default))return e?n.default:n;if(t(n))return n}}function ie(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return y(function(){return I(t,e)})}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return I(function(r){return e.every(function(o){return r?.[o]})})}function R(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return y(function(){return E(...e)})}function Ft(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return I(function(n){return n?.name===t},e)}function ae(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return y(function(){return Ft(t,e)})}function zt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return I(function(n){return n?.displayName===t},e)}function ce(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return y(function(){return zt(t,e)})}function Lt(t){return I(function(e){return e?.getName?.()===t})}function V(t){return y(function(){return Lt(t)})}var P,g=c(()=>{"use strict";et();nt();ot();P=new U});var ct,m,S=c(()=>{"use strict";Q();tt();ot();ct=new Map,m=function t(e){"use strict";var n=this;if(j(this,t),d(this,"identifier",void 0),d(this,"patches",[]),d(this,"stopped",!1),d(this,"before",function(r,o,i){if(n.stopped)return function(){return!1};let a=Ct(o,r,i);return n.patches.push(a),a}),d(this,"after",function(r,o,i){if(n.stopped)return function(){return!1};let a=Mt(o,r,i);return n.patches.push(a),a}),d(this,"instead",function(r,o,i){if(n.stopped)return function(){return!1};let a=G(o,r,i);return n.patches.push(a),a}),d(this,"unpatchAllAndStop",function(){let r=!0;n.stopped=!0;for(let o of n.patches)try{r=o?.()&&r}catch{r=!1}return ct.delete(n.identifier),r}),d(this,"addUnpatcher",function(r){if(typeof r!="function")throw new Error("Unpatcher must be a function");n.patches.push(r)}),!e||typeof e!="string")throw new Error("Patcher identifier must be a non-empty string");if(ct.has(e))throw new Error(`Patcher with identifier "${e}" already exists`);this.identifier=e,ct.set(e,this)}});var st={};v(st,{connectToDebugger:()=>Y});async function Y(){if(!x){for(;;)try{x=new WebSocket("ws://localhost:9090/");break}catch{await new Promise(function(t){return setTimeout(t,3e3)})}x.addEventListener("open",function(){return console.log("Connected to debug websocket")}),x.addEventListener("error",function(t){return console.error(t.message)}),x.addEventListener("message",function(t){try{new ue(`return (${t.data})`)().then(console.log).catch(console.error)}catch(e){console.error(e)}}),x.addEventListener("close",function(){x=null,setTimeout(Y,3e3)}),se(globalThis,"nativeLoggingHook",function(t){let[e,n]=t;x?.readyState===WebSocket.OPEN&&x.send(JSON.stringify({level:n,message:e}))})}}var se,x,ue,ut=c(()=>{"use strict";S();({before:se}=new m("debug-ws-patcher")),x=null,ue=Object.getPrototypeOf(async function(){}).constructor});async function K(){let t,e,n=h(function(r){return typeof r?.defaultProps?.hideGiftButton=="boolean"},function(r){e=r,{hideGiftButton:t}=r.defaultProps,r.defaultProps.hideGiftButton=!0});return function(){return t!==void 0?e.defaultProps.hideGiftButton=t:n()}}var jt=c(()=>{"use strict";g()});var W,ft,T,lt,J=c(()=>{"use strict";g();W=E("getAssetByID"),ft=R("Messages"),T=R("FormSection"),lt=R("NavigationContainer")});var B={};v(B,{getAssetByID:()=>pe,getAssetByName:()=>le,getAssetIDByName:()=>mt,patchAssets:()=>pt,registeredAssets:()=>D});function pt(){let t=fe(W,"registerAsset",function(r,o){let[i]=r;D[i.name]={...i,id:o}}),e,n=1;for(;e=W.getAssetByID(n);)D[e.name]??={...e,id:n++};return t}var fe,D,le,pe,mt,X=c(()=>{"use strict";J();S();({after:fe}=new m("assets-patcher")),D={};le=function(t){return D[t]},pe=function(t){return W.getAssetByID(t)},mt=function(t){return D[t]?.id}});function C(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return new Promise(function(n){let r=setInterval(function(){t()&&(clearInterval(r),n())},e)})}var Ut=c(()=>{"use strict"});function O(t,e){return M(t,e,{walkable:["props","children","child","sibling"]})}var Ht=c(()=>{"use strict";N()});function dt(t,e,n,r){if(!(r>n.maxDepth)&&t){try{if(e(t))return t}catch{}if(Array.isArray(t)){for(let o of t)if(!(typeof o!="object"||o===null))try{let i=dt(o,e,n,r+1);if(i)return i}catch{}}else if(typeof t=="object"){for(let o of Object.keys(t))if(!(typeof t[o]!="object"||t[o]===null)&&!(n.walkable.length&&!n.walkable.includes(o))&&!n.ignore.includes(o))try{let i=dt(t[o],e,n,r+1);if(i)return i}catch{}}}}function M(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return dt(t,e,{walkable:[],ignore:[],maxDepth:100,...n},0)}var kt=c(()=>{"use strict"});async function F(t,e,n,r){let o=await e.then(function(i){return i.default});typeof n=="string"&&(n={title:n}),t.navigate("PyoncordCustomPage",{...n,render:function(){return React.createElement(o,r)}})}var $t=c(()=>{"use strict"});var ht={};v(ht,{EventEmitter:()=>U,assets:()=>B,awaitUntil:()=>C,findInReactTree:()=>O,findInTree:()=>M,lazyNavigate:()=>F,proxyLazy:()=>y});var N=c(()=>{"use strict";X();Ut();et();Ht();kt();$t();nt()});async function Z(){try{await C(function(){return gt.getCurrentUser?.()}),gt.getCurrentUser().flags|=1,gt._dispatcher._actionHandlers._computeOrderedActionHandlers("OVERLAY_INITIALIZE").forEach(function(t){let{name:e,actionHandler:n}=t;e.includes?.("Experiment")&&n?.({serializedExperimentStore:me.getSerializedState(),user:{flags:1}})})}catch(t){console.error("An error occurred while patching experiments",t)}}var gt,me,Gt=c(()=>{"use strict";g();N();gt=V("UserStore"),me=V("ExperimentStore")});function q(){let t=h(function(e){return e?.dispatch&&e._actionHandlers?._orderedActionHandlers},function(e){Vt.before(e,"dispatch",function(n){if(n[0].type==="IDLE")return[{type:"THIS_TYPE_DOES_NOT_EXIST"}]})});return function(){return t(),Vt.unpatchAllAndStop()}}var Vt,Yt=c(()=>{"use strict";g();S();Vt=new m("idle-patcher")});var Wt={};v(Wt,{default:()=>Kt});function Kt(){return React.createElement(de,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(he,{title:"Settings",titleStyleType:"no_border"},React.createElement(ye,{label:"Trigger Discord's experiments menu",subLabel:"Enables the experiments menu in Discord's settings, which only staff has access to.",leading:React.createElement(ge.Icon,{source:mt("ic_badge_staff")}),value:!0,onValueChange:function(){}})))}var de,he,ge,ye,Jt=c(()=>{"use strict";J();X();({ScrollView:de}=ReactNative),{FormSection:he,FormRow:ge,FormSwitchRow:ye}=T});function we(){let{FormSection:t,FormRow:e,FormIcon:n}=T,r=lt.useNavigation(),o="Pyoncord (17b186f) (DEV)".trimEnd();return React.createElement(t,{key:"Pyoncord",title:o},React.createElement(e,{label:"General",leading:React.createElement(n,{source:B.getAssetIDByName("settings")}),trailing:e.Arrow,onPress:function(){return F(r,Promise.resolve().then(()=>(Jt(),Wt)),"Pyoncord")}}))}function L(){let t=h(function(n){return n.default?.name==="getScreens"},function(n){z.after(n,"default",function(r,o){return Object.assign(o,{PyoncordCustomPage:{title:"Pyoncord",render:function(i){let{render:a,...u}=i,s=lt.useNavigation();return React.useEffect(function(){s.setOptions({...u})},[]),React.createElement(a,null)}}})})}),e=h(function(n){return n.default?.name==="UserSettingsOverviewWrapper"},function(n){let r=z.after(n,"default",function(o,i){let a=O(i.props.children,function(u){return u.type?.name==="UserSettingsOverview"});z.after(a.type.prototype,"renderSupportAndAcknowledgements",function(u,s){let{props:{children:f}}=s;try{let l=f.findIndex(function(_){return _?.type?.name==="UploadLogsButton"});l!==-1&&f.splice(l,1)}catch{}}),z.after(a.type.prototype,"render",function(u,s){let f=[ft.Messages.BILLING_SETTINGS,ft.Messages.PREMIUM_SETTINGS];try{let l=O(s.props.children,function(p){return p?.children?.[1]?.type===T.FormSection}).children,_=l.findIndex(function(p){return f.includes(p?.props.label)});l.splice(-~_||4,0,React.createElement(we,null))}catch(l){console.error("An error occurred while trying to append Pyoncord's settings section. "+l?.stack)}}),r()})});return function(){t(),e(),z.unpatchAllAndStop()}}var z,Xt=c(()=>{"use strict";g();J();S();N();z=new m("settings-patcher")});var wt={};v(wt,{getCurrentTheme:()=>yt});function yt(){throw new Error("Not implemented")}var xt=c(()=>{"use strict"});async function Zt(){}var bt,qt=c(()=>{"use strict";g();S();xt();bt=new m("theme-patcher")});var vt={};v(vt,{patchChatInput:()=>K,patchExperiments:()=>Z,patchIdle:()=>q,patchSettings:()=>L,patchTheme:()=>Zt});var _t=c(()=>{"use strict";jt();Gt();Yt();Xt();qt()});var Qt={};v(Qt,{Patcher:()=>m,debug:()=>st,default:()=>xe,metro:()=>at,patches:()=>vt,themes:()=>wt,utils:()=>ht});async function xe(){it(),Y();let t=[pt(),Z(),K(),q(),L()];return await Promise.all(t),function(){console.log("Unloading Pyoncord..."),t.forEach(async function(e){return(await e)?.()})}}var te=c(()=>{"use strict";ut();g();_t();X();ut();g();S();_t();xt();N()});g();console.log(`Pyon! (Pyoncord, hash=17b186f, dev=${!0})`);async function be(){try{window.React=E("createElement"),window.ReactNative=E("View"),window.pyoncord={...await Promise.resolve().then(()=>(te(),Qt))},pyoncord.unload=await pyoncord.default(),delete pyoncord.default}catch(t){t=t?.stack??t,alert([`Failed to load Pyoncord.
`,"Build Hash: 17b186f",`Debug Build: ${!0}`,`Build Number: ${nativeModuleProxy.RTNClientInfoManager?.Build}`,t].join(`
`)),console.error(t)}}be();})();
//# sourceURL=pyoncord
