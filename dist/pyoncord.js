"use strict";(()=>{var me=Object.defineProperty;var i=(t,e)=>()=>(t&&(e=t(t=0)),e);var d=(t,e)=>{for(var n in e)me(t,n,{get:e[n],enumerable:!0})};function $(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var it=i(()=>{});function Bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function W(t,e,n){return e&&Bt(t.prototype,e),n&&Bt(t,n),t}var ct=i(()=>{});function g(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var st=i(()=>{});var X,ut=i(()=>{"use strict";it();ct();st();X=function(){"use strict";function t(){$(this,t),g(this,"events",new Map)}return W(t,[{key:"on",value:function(n,r){this.events.get(n)?.add(r)||this.events.set(n,new Set([r]))}},{key:"emit",value:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];let s=this.events.get(n);s&&s.forEach(function(f){f(...o)})}},{key:"off",value:function(n,r){let o=this.events.get(n);o&&(o.delete(r),o.size===0&&this.events.delete(n))}}]),t}()});function w(t){let e=function(){};return e[K]=function(){return e[he]??=t()},new Proxy(e,ge)}var K,he,Mt,Nt,ge,ft=i(()=>{"use strict";K=Symbol("lazyFactory"),he=Symbol("lazyCache"),Mt=["arguments","caller","prototype"],Nt=function(t){return typeof t=="string"&&Mt.includes(t)},ge={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(t){return[t,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Reflect[t](e[K](),...r)}]})),ownKeys:function(t){let e=Reflect.ownKeys(t[K]());return Mt.forEach(function(n){return Nt(n)&&e.push(n)}),e},getOwnPropertyDescriptor:function(t,e){if(Nt(e))return Reflect.getOwnPropertyDescriptor(t,e);let n=Reflect.getOwnPropertyDescriptor(t[K](),e);return n&&Object.defineProperty(t,e,n),n}}});var Lt,_,Z=i(()=>{Lt=["a","b","i"],_=new Map});function Ft(t,e,n,r,o){let a=_.get(e)?.[t];if(!a)return o?Reflect.construct(e[t],n,r):e[t].apply(r,n);for(let c of a.b.values()){let u=c.call(r,n);Array.isArray(u)&&(n=u)}let s=function(){for(var c=arguments.length,u=new Array(c),l=0;l<c;l++)u[l]=arguments[l];return o?Reflect.construct(a.o,u,r):a.o.apply(r,u)};for(let c of a.i.values()){let u=s;s=function(){for(var l=arguments.length,S=new Array(l),p=0;p<l;p++)S[p]=arguments[p];return c.call(r,S,u)}}let f=s(...n);for(let c of a.a.values())f=c.call(r,n,f)??f;return f}var zt=i(()=>{Z()});function Ut(t,e,n,r){let o=_.get(t),a=o?.[e];return a?.[r].has(n)?(a[r].delete(n),Lt.every(function(s){return a[s].size===0})&&(Reflect.defineProperty(t,e,{value:a.o,writable:!0,configurable:!0})||(t[e]=a.o),delete o[e]),Object.keys(o).length==0&&_.delete(t),!0):!1}var lt=i(()=>{Z()});function J(t){return function(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof n[e]!="function")throw new Error(`${e} is not a function in ${n.constructor.name}`);_.has(n)||_.set(n,{});let a=_.get(n);if(!a[e]){let c=n[e];a[e]={o:c,b:new Map,i:new Map,a:new Map};let u=function(p,E,N){let de=Ft(e,n,E,p,N);return o&&f(),de},l=new Proxy(c,{apply:function(p,E,N){return u(E,N,!1)},construct:function(p,E){return u(c,E,!0)},get:function(p,E,N){return E=="toString"?c.toString.bind(c):Reflect.get(p,E,N)}});Reflect.defineProperty(n,e,{value:l,configurable:!0,writable:!0})||(n[e]=l)}let s=Symbol(),f=function(){return Ut(n,e,s,t)};return a[e][t].set(s,r),f}}var jt=i(()=>{zt();Z();lt()});var Ht,q,kt,pt=i(()=>{jt();lt();Ht=J("b"),q=J("i"),kt=J("a")});var mt={};d(mt,{AssetManager:()=>M,Colors:()=>m,Constants:()=>L,Forms:()=>T,I18n:()=>Q,NavigationNative:()=>tt,Styles:()=>dt});var M,Q,T,tt,dt,m,L,A=i(()=>{"use strict";y();M=R("getAssetByID"),Q=v("Messages"),T=v("FormSection"),tt=v("NavigationContainer"),dt=v("createThemedStyleSheet"),m=v("unsafe_rawColors"),L=v("NODE_SIZE")});var gt={};d(gt,{common:()=>mt,findByDisplayName:()=>Gt,findByDisplayNameLazy:()=>we,findByName:()=>Yt,findByNameLazy:()=>xe,findByProps:()=>R,findByPropsLazy:()=>v,findByStoreName:()=>$t,findByStoreNameLazy:()=>et,findInitializedModule:()=>O,findLazy:()=>ye,getInitializedModules:()=>Vt,moduleLoadEvent:()=>P,patchFactories:()=>ht,waitForModule:()=>x});function ht(){for(let t in modules){let e=modules[t];e.factory&&q("factory",e,function(n,r){r(...n),e.dependencyMap=n[6],P.emit("export",n[5])})}}function*Vt(){for(let t in modules)modules[t].isInitialized&&(yield modules[t].publicModule)}function x(t,e){let n=function(r){r.default&&r.__esModule&&t(r.default)&&(P.off("export",n),e(r.default)),t(r)&&(P.off("export",n),e(r))};return P.on("export",n),function(){return P.off("export",n)}}function O(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;for(let{exports:n}of Vt()){if(n?.default&&n.__esModule&&t(n.default))return e?n.default:n;if(t(n))return n}}function ye(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return O(t,e)})}function R(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O(function(r){return e.every(function(o){return r?.[o]})})}function v(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return w(function(){return R(...e)})}function Yt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.name===t},e)}function xe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return Yt(t,e)})}function Gt(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.displayName===t},e)}function we(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return Gt(t,e)})}function $t(t){return O(function(e){return e?.getName?.()===t})}function et(t){return w(function(){return $t(t)})}var P,y=i(()=>{"use strict";ut();ft();pt();A();P=new X});var yt={};d(yt,{default:()=>h,patchesInstances:()=>nt});var nt,h,I=i(()=>{"use strict";it();ct();st();pt();nt=new Map,h=function(){"use strict";function t(e){var n=this;if($(this,t),g(this,"identifier",void 0),g(this,"patches",[]),g(this,"stopped",!1),g(this,"before",function(r,o,a){return n.addUnpatcher(Ht(o,r,a))}),g(this,"after",function(r,o,a){return n.addUnpatcher(kt(o,r,a))}),g(this,"instead",function(r,o,a){return n.addUnpatcher(q(o,r,a))}),g(this,"addUnpatcher",function(r){if(n.stopped)return function(){return!1};if(typeof r!="function")throw new Error("Unpatcher must be a function");return n.patches.push(r),r}),!e||typeof e!="string")throw new Error("Patcher identifier must be a non-empty string");if(nt.has(e))throw new Error(`Patcher with identifier "${e}" already exists`);this.identifier=e,nt.set(e,this)}return W(t,[{key:"unpatchAllAndStop",value:function(){let n=!0;this.stopped=!0;for(let r of this.patches)try{if(r?.()===!1)throw void 0}catch{n=!1}return nt.delete(this.identifier),n}}]),t}()});var xt={};d(xt,{connectToDebugger:()=>rt});async function rt(){if(!b){for(;;)try{b=new WebSocket("ws://localhost:9090/");break}catch{await new Promise(function(t){return setTimeout(t,3e3)})}b.addEventListener("open",function(){return console.log("Connected to debug websocket")}),b.addEventListener("error",function(t){return console.error(t.message)}),b.addEventListener("message",function(t){try{new be(`return (${t.data})`)().then(console.log).catch(console.error)}catch(e){console.error(e)}}),b.addEventListener("close",function(){b=null,setTimeout(rt,3e3)}),_e(globalThis,"nativeLoggingHook",function(t){let[e,n]=t;b?.readyState===WebSocket.OPEN&&b.send(JSON.stringify({level:n,message:e}))})}}var _e,b,be,wt=i(()=>{"use strict";I();({before:_e}=new h("debug-ws-patcher")),b=null,be=Object.getPrototypeOf(async function(){}).constructor});async function F(){let t,e,n=x(function(r){return typeof r?.defaultProps?.hideGiftButton=="boolean"},function(r){e=r,{hideGiftButton:t}=r.defaultProps,r.defaultProps.hideGiftButton=!0});return function(){return t!==void 0?e.defaultProps.hideGiftButton=t:n()}}var Wt=i(()=>{"use strict";y()});var C={};d(C,{getAssetByID:()=>Se,getAssetByName:()=>ve,getAssetIDByName:()=>bt,patchAssets:()=>_t,registeredAssets:()=>z});function _t(){let t=Ee(M,"registerAsset",function(r,o){let[a]=r;z[a.name]={...a,id:o}}),e,n=1;for(;e=M.getAssetByID(n);)z[e.name]??={...e,id:n++};return t}var Ee,z,ve,Se,bt,ot=i(()=>{"use strict";I();A();({after:Ee}=new h("assets-patcher")),z={};ve=function(t){return z[t]},Se=function(t){return M.getAssetByID(t)},bt=function(t){return z[t]?.id}});function U(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return new Promise(function(n){let r=setInterval(function(){t()&&(clearInterval(r),n())},e)})}var Xt=i(()=>{"use strict"});function D(t,e){return j(t,e,{walkable:["props","children","child","sibling"]})}var Kt=i(()=>{"use strict";H()});function Et(t,e,n,r){if(!(r>n.maxDepth)&&t){try{if(e(t))return t}catch{}if(Array.isArray(t)){for(let o of t)if(!(typeof o!="object"||o===null))try{let a=Et(o,e,n,r+1);if(a)return a}catch{}}else if(typeof t=="object"){for(let o of Object.keys(t))if(!(typeof t[o]!="object"||t[o]===null)&&!(n.walkable.length&&!n.walkable.includes(o))&&!n.ignore.includes(o))try{let a=Et(t[o],e,n,r+1);if(a)return a}catch{}}}}function j(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Et(t,e,{walkable:[],ignore:[],maxDepth:100,...n},0)}var Zt=i(()=>{"use strict"});async function B(t,e,n,r){let o=await e.then(function(a){return a.default});typeof n=="string"&&(n={title:n}),t.navigate("PyoncordCustomPage",{...n,render:function(){return React.createElement(o,r)}})}var Jt=i(()=>{"use strict"});var vt={};d(vt,{EventEmitter:()=>X,assets:()=>C,awaitUntil:()=>U,findInReactTree:()=>D,findInTree:()=>j,lazyNavigate:()=>B,proxyLazy:()=>w});var H=i(()=>{"use strict";ot();Xt();ut();Kt();Zt();Jt();ft()});async function k(){try{await U(function(){return St.getCurrentUser?.()}),St.getCurrentUser().flags|=1,St._dispatcher._actionHandlers._computeOrderedActionHandlers("OVERLAY_INITIALIZE").forEach(function(t){let{name:e,actionHandler:n}=t;e.includes?.("Experiment")&&n?.({serializedExperimentStore:Re.getSerializedState(),user:{flags:1}})})}catch(t){console.error("An error occurred while patching experiments",t)}}var St,Re,qt=i(()=>{"use strict";y();H();St=et("UserStore"),Re=et("ExperimentStore")});function V(){let t=x(function(e){return e?.dispatch&&e._actionHandlers?._orderedActionHandlers},function(e){Qt.before(e,"dispatch",function(n){if(n[0].type==="IDLE")return[{type:"THIS_TYPE_DOES_NOT_EXIST"}]})});return function(){return t(),Qt.unpatchAllAndStop()}}var Qt,te=i(()=>{"use strict";I();y();Qt=new h("idle-patcher")});var ne={};d(ne,{default:()=>ee});function ee(){return React.createElement(Ie,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(Te,{title:"Settings",titleStyleType:"no_border"},React.createElement(Pe,{label:"Trigger Discord's experiments menu",subLabel:"Enables the experiments menu in Discord's settings, which only staff has access to.",leading:React.createElement(Ae.Icon,{source:bt("ic_badge_staff")}),value:!0,onValueChange:function(){}})))}var Ie,Te,Ae,Pe,re=i(()=>{"use strict";A();ot();({ScrollView:Ie}=ReactNative),{FormSection:Te,FormRow:Ae,FormSwitchRow:Pe}=T});var at,oe=i(()=>{"use strict";A();at=dt.createThemedStyleSheet({container:{flex:1},list:{paddingVertical:14,paddingHorizontal:8},card:{borderRadius:10,margin:5,backgroundColor:m.colors.BACKGROUND_TERTIARY},header:{flexDirection:"row",flexWrap:"wrap"},bodyCard:{backgroundColor:m.colors.BACKGROUND_SECONDARY,borderBottomLeftRadius:10,borderBottomRightRadius:10},bodyText:{color:m.colors.TEXT_NORMAL,paddingHorizontal:16,paddingTop:10,paddingBottom:18,textAlignVertical:"top"},actions:{justifyContent:"flex-start",flexDirection:"row",alignItems:"center",paddingLeft:16,paddingRight:12,paddingBottom:10},iconsContainer:{flexDirection:"row",justifyContent:"flex-start"},icons:{width:24,height:24,marginHorizontal:4,tintColor:m.colors.INTERACTIVE_NORMAL},headerText:{fontFamily:L.Fonts.PRIMARY_SEMIBOLD,color:m.colors.TEXT_NORMAL,fontSize:16},link:{color:m.colors.TEXT_LINK},emptyPageImage:{display:"flex",justifyContent:"center",alignItems:"center",alignSelf:"center",marginTop:"10%"},emptyPageText:{marginTop:10,color:m.colors.TEXT_NORMAL,fontFamily:L.Fonts.PRIMARY_SEMIBOLD,textAlign:"center"},search:{margin:0,marginBottom:0,paddingBottom:5,paddingRight:15,paddingLeft:15,backgroundColor:"none",borderBottomWidth:0,background:"none"},button:{height:34,paddingHorizontal:16,marginLeft:6},buttonIcon:{width:14,height:14,marginRight:6,color:m.colors.TEXT_NORMAL},invalidHeader:{flexDirection:"column",flexWrap:"wrap"},invalidInfoText:{color:m.colors.TEXT_MUTED,fontSize:12,fontWeight:"400"},warningText:{color:m.colors.TEXT_WARNING,fontFamily:L.Fonts.PRIMARY_NORMAL,fontSize:12,paddingTop:5}})});var ie={};d(ie,{default:()=>ae});function ae(){return React.createElement(De,{style:at.container},React.createElement(Oe,{style:at.emptyPageImage},React.createElement(Ce,{style:at.emptyPageText},"Plugin system coming soon (never).")))}var Oe,Ce,De,ce=i(()=>{"use strict";oe();({View:Oe,Text:Ce,ScrollView:De}=ReactNative)});function Be(){let{FormSection:t,FormRow:e,FormIcon:n}=T,r=tt.useNavigation(),o="Pyoncord (6512b1f) ".trimEnd();return React.createElement(t,{key:"Pyoncord",title:o},React.createElement(e,{label:"Pyoncord",leading:React.createElement(n,{source:C.getAssetIDByName("Discord")}),trailing:e.Arrow,onPress:function(){return B(r,Promise.resolve().then(()=>(re(),ne)),"Pyoncord")}}),React.createElement(e,{label:"Plugins",leading:React.createElement(n,{source:C.getAssetIDByName("Discord")}),trailing:e.Arrow,onPress:function(){return B(r,Promise.resolve().then(()=>(ce(),ie)),"Plugins")}}))}function G(){let t=x(function(n){return n.default?.name==="getScreens"},function(n){Y.after(n,"default",function(r,o){return Object.assign(o,{PyoncordCustomPage:{title:"Pyoncord",render:function(a){let{render:s,...f}=a,c=tt.useNavigation();return React.useEffect(function(){c.setOptions({...f})},[]),React.createElement(s,null)}}})})}),e=x(function(n){return n.default?.name==="UserSettingsOverviewWrapper"},function(n){let r=Y.after(n,"default",function(o,a){let s=D(a.props.children,function(f){return f.type?.name==="UserSettingsOverview"});Y.after(s.type.prototype,"renderSupportAndAcknowledgements",function(f,c){let{props:{children:u}}=c;try{let l=u.findIndex(function(S){return S?.type?.name==="UploadLogsButton"});l!==-1&&u.splice(l,1)}catch{}}),Y.after(s.type.prototype,"render",function(f,c){try{let u=[Q.Messages.BILLING_SETTINGS,Q.Messages.PREMIUM_SETTINGS],l=D(c.props.children,function(p){return p?.children?.[1]?.type===T.FormSection}).children,S=l.findIndex(function(p){return u.includes(p?.props.label)});l.splice(-~S||4,0,React.createElement(Be,null))}catch(u){console.error("An error occurred while trying to append Pyoncord's settings section. "+u?.stack)}}),r()})});return function(){t(),e(),Y.unpatchAllAndStop()}}var Y,se=i(()=>{"use strict";I();y();A();H();Y=new h("settings-patcher")});var It={};d(It,{getCurrentTheme:()=>Rt});function Rt(){throw new Error("Not implemented")}var Tt=i(()=>{"use strict"});async function Pt(){}var At,ue=i(()=>{"use strict";I();y();Tt();At=new h("theme-patcher")});var Ot={};d(Ot,{patchChatInput:()=>F,patchExperiments:()=>k,patchIdle:()=>V,patchSettings:()=>G,patchTheme:()=>Pt});var Ct=i(()=>{"use strict";Wt();qt();te();se();ue()});var Dt={};d(Dt,{Patcher:()=>yt});var fe=i(()=>{"use strict";I()});var le={};d(le,{api:()=>Dt,debug:()=>xt,default:()=>Ne,metro:()=>gt,patches:()=>Ot,themes:()=>It,utils:()=>vt});async function Ne(){ht(),rt();let t=[_t(),k(),F(),V(),G()];return await Promise.all(t),function(){console.log("Unloading Pyoncord..."),t.forEach(async function(e){return(await e)?.()})}}var pe=i(()=>{"use strict";wt();y();Ct();ot();fe();wt();y();Ct();Tt();H()});y();console.log(`Pyon! (Pyoncord, hash=6512b1f, dev=${!1})`);async function Me(){try{window.React=R("createElement"),window.ReactNative=R("View"),window.pyoncord={...await Promise.resolve().then(()=>(pe(),le))},pyoncord.unload=await pyoncord.default(),delete pyoncord.default}catch(t){t=t?.stack??t,alert([`Failed to load Pyoncord.
`,"Build Hash: 6512b1f",`Debug Build: ${!1}`,`Build Number: ${nativeModuleProxy.RTNClientInfoManager?.Build}`,t].join(`
`)),console.error(t)}}Me();})();
//# sourceURL=pyoncord
