"use strict";(()=>{var ie=Object.defineProperty;var s=(t,e)=>()=>(t&&(e=t(t=0)),e);var m=(t,e)=>{for(var n in e)ie(t,n,{get:e[n],enumerable:!0})};function G(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var nt=s(()=>{});function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function At(t,e,n){return e&&Ot(t.prototype,e),n&&Ot(t,n),t}var Rt=s(()=>{});function d(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var rt=s(()=>{});var V,ot=s(()=>{"use strict";nt();Rt();rt();V=function(){"use strict";function t(){G(this,t),d(this,"events",new Map)}return At(t,[{key:"on",value:function(n,r){this.events.get(n)?.add(r)||this.events.set(n,new Set([r]))}},{key:"emit",value:function(n){for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];let i=this.events.get(n);i&&i.forEach(function(u){u(...o)})}},{key:"off",value:function(n,r){let o=this.events.get(n);o&&(o.delete(r),o.size===0&&this.events.delete(n))}}]),t}()});function w(t){let e=function(){};return e[Y]=function(){return e[se]??=t()},new Proxy(e,ce)}var Y,se,Dt,Tt,ce,at=s(()=>{"use strict";Y=Symbol("lazyFactory"),se=Symbol("lazyCache"),Dt=["arguments","caller","prototype"],Tt=function(t){return typeof t=="string"&&Dt.includes(t)},ce={...Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(function(t){return[t,function(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];return Reflect[t](e[Y](),...r)}]})),ownKeys:function(t){let e=Reflect.ownKeys(t[Y]());return Dt.forEach(function(n){return Tt(n)&&e.push(n)}),e},getOwnPropertyDescriptor:function(t,e){if(Tt(e))return Reflect.getOwnPropertyDescriptor(t,e);let n=Reflect.getOwnPropertyDescriptor(t[Y](),e);return n&&Object.defineProperty(t,e,n),n}}});var Bt,x,K=s(()=>{Bt=["a","b","i"],x=new Map});function Ct(t,e,n,r,o){let a=x.get(e)?.[t];if(!a)return o?Reflect.construct(e[t],n,r):e[t].apply(r,n);for(let c of a.b.values()){let f=c.call(r,n);Array.isArray(f)&&(n=f)}let i=function(){for(var c=arguments.length,f=new Array(c),l=0;l<c;l++)f[l]=arguments[l];return o?Reflect.construct(a.o,f,r):a.o.apply(r,f)};for(let c of a.i.values()){let f=i;i=function(){for(var l=arguments.length,_=new Array(l),p=0;p<l;p++)_[p]=arguments[p];return c.call(r,_,f)}}let u=i(...n);for(let c of a.a.values())u=c.call(r,n,u)??u;return u}var Mt=s(()=>{K()});function Nt(t,e,n,r){let o=x.get(t),a=o?.[e];return a?.[r].has(n)?(a[r].delete(n),Bt.every(function(i){return a[i].size===0})&&(Reflect.defineProperty(t,e,{value:a.o,writable:!0,configurable:!0})||(t[e]=a.o),delete o[e]),Object.keys(o).length==0&&x.delete(t),!0):!1}var it=s(()=>{K()});function W(t){return function(e,n,r){let o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(typeof n[e]!="function")throw new Error(`${e} is not a function in ${n.constructor.name}`);x.has(n)||x.set(n,{});let a=x.get(n);if(!a[e]){let c=n[e];a[e]={o:c,b:new Map,i:new Map,a:new Map};let f=function(p,v,R){let ae=Ct(e,n,v,p,R);return o&&u(),ae},l=new Proxy(c,{apply:function(p,v,R){return f(v,R,!1)},construct:function(p,v){return f(c,v,!0)},get:function(p,v,R){return v=="toString"?c.toString.bind(c):Reflect.get(p,v,R)}});Reflect.defineProperty(n,e,{value:l,configurable:!0,writable:!0})||(n[e]=l)}let i=Symbol(),u=function(){return Nt(n,e,i,t)};return a[e][t].set(i,r),u}}var Ft=s(()=>{Mt();K();it()});var zt,J,Lt,st=s(()=>{Ft();it();zt=W("b"),J=W("i"),Lt=W("a")});var ct={};m(ct,{AssetManager:()=>T,Forms:()=>P,I18n:()=>X,NavigationNative:()=>Z});var T,X,P,Z,D=s(()=>{"use strict";g();T=E("getAssetByID"),X=B("Messages"),P=B("FormSection"),Z=B("NavigationContainer")});var ft={};m(ft,{common:()=>ct,findByDisplayName:()=>Ht,findByDisplayNameLazy:()=>le,findByName:()=>Ut,findByNameLazy:()=>fe,findByProps:()=>E,findByPropsLazy:()=>B,findByStoreName:()=>kt,findByStoreNameLazy:()=>q,findInitializedModule:()=>O,findLazy:()=>ue,getInitializedModules:()=>jt,moduleLoadEvent:()=>I,patchFactories:()=>ut,waitForModule:()=>y});function ut(){for(let t in modules){let e=modules[t];e.factory&&J("factory",e,function(n,r){r(...n),e.dependencyMap=n[6],I.emit("export",n[5])})}}function*jt(){for(let t in modules)modules[t].isInitialized&&(yield modules[t].publicModule)}function y(t,e){let n=function(r){r.default&&r.__esModule&&t(r.default)&&(I.off("export",n),e(r.default)),t(r)&&(I.off("export",n),e(r))};return I.on("export",n),function(){return I.off("export",n)}}function O(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;for(let{exports:n}of jt()){if(n?.default&&n.__esModule&&t(n.default))return e?n.default:n;if(t(n))return n}}function ue(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return O(t,e)})}function E(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return O(function(r){return e.every(function(o){return r?.[o]})})}function B(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return w(function(){return E(...e)})}function Ut(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.name===t},e)}function fe(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return Ut(t,e)})}function Ht(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return O(function(n){return n?.displayName===t},e)}function le(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return w(function(){return Ht(t,e)})}function kt(t){return O(function(e){return e?.getName?.()===t})}function q(t){return w(function(){return kt(t)})}var I,g=s(()=>{"use strict";ot();at();st();D();I=new V});var lt={};m(lt,{default:()=>h,patchesInstances:()=>Q});var Q,h,S=s(()=>{"use strict";nt();rt();st();Q=new Map,h=function t(e){"use strict";var n=this;if(G(this,t),d(this,"identifier",void 0),d(this,"patches",[]),d(this,"stopped",!1),d(this,"before",function(r,o,a){if(n.stopped)return function(){return!1};let i=zt(o,r,a);return n.patches.push(i),i}),d(this,"after",function(r,o,a){if(n.stopped)return function(){return!1};let i=Lt(o,r,a);return n.patches.push(i),i}),d(this,"instead",function(r,o,a){if(n.stopped)return function(){return!1};let i=J(o,r,a);return n.patches.push(i),i}),d(this,"unpatchAllAndStop",function(){let r=!0;n.stopped=!0;for(let o of n.patches)try{r=o?.()&&r}catch{r=!1}return Q.delete(n.identifier),r}),d(this,"addUnpatcher",function(r){if(typeof r!="function")throw new Error("Unpatcher must be a function");n.patches.push(r)}),!e||typeof e!="string")throw new Error("Patcher identifier must be a non-empty string");if(Q.has(e))throw new Error(`Patcher with identifier "${e}" already exists`);this.identifier=e,Q.set(e,this)}});var pt={};m(pt,{connectToDebugger:()=>tt});async function tt(){if(!b){for(;;)try{b=new WebSocket("ws://localhost:9090/");break}catch{await new Promise(function(t){return setTimeout(t,3e3)})}b.addEventListener("open",function(){return console.log("Connected to debug websocket")}),b.addEventListener("error",function(t){return console.error(t.message)}),b.addEventListener("message",function(t){try{new me(`return (${t.data})`)().then(console.log).catch(console.error)}catch(e){console.error(e)}}),b.addEventListener("close",function(){b=null,setTimeout(tt,3e3)}),pe(globalThis,"nativeLoggingHook",function(t){let[e,n]=t;b?.readyState===WebSocket.OPEN&&b.send(JSON.stringify({level:n,message:e}))})}}var pe,b,me,mt=s(()=>{"use strict";S();({before:pe}=new h("debug-ws-patcher")),b=null,me=Object.getPrototypeOf(async function(){}).constructor});async function C(){let t,e,n=y(function(r){return typeof r?.defaultProps?.hideGiftButton=="boolean"},function(r){e=r,{hideGiftButton:t}=r.defaultProps,r.defaultProps.hideGiftButton=!0});return function(){return t!==void 0?e.defaultProps.hideGiftButton=t:n()}}var $t=s(()=>{"use strict";g()});var N={};m(N,{getAssetByID:()=>ge,getAssetByName:()=>he,getAssetIDByName:()=>ht,patchAssets:()=>dt,registeredAssets:()=>M});function dt(){let t=de(T,"registerAsset",function(r,o){let[a]=r;M[a.name]={...a,id:o}}),e,n=1;for(;e=T.getAssetByID(n);)M[e.name]??={...e,id:n++};return t}var de,M,he,ge,ht,et=s(()=>{"use strict";D();S();({after:de}=new h("assets-patcher")),M={};he=function(t){return M[t]},ge=function(t){return T.getAssetByID(t)},ht=function(t){return M[t]?.id}});function F(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;return new Promise(function(n){let r=setInterval(function(){t()&&(clearInterval(r),n())},e)})}var Gt=s(()=>{"use strict"});function A(t,e){return z(t,e,{walkable:["props","children","child","sibling"]})}var Vt=s(()=>{"use strict";L()});function gt(t,e,n,r){if(!(r>n.maxDepth)&&t){try{if(e(t))return t}catch{}if(Array.isArray(t)){for(let o of t)if(!(typeof o!="object"||o===null))try{let a=gt(o,e,n,r+1);if(a)return a}catch{}}else if(typeof t=="object"){for(let o of Object.keys(t))if(!(typeof t[o]!="object"||t[o]===null)&&!(n.walkable.length&&!n.walkable.includes(o))&&!n.ignore.includes(o))try{let a=gt(t[o],e,n,r+1);if(a)return a}catch{}}}}function z(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return gt(t,e,{walkable:[],ignore:[],maxDepth:100,...n},0)}var Yt=s(()=>{"use strict"});async function j(t,e,n,r){let o=await e.then(function(a){return a.default});typeof n=="string"&&(n={title:n}),t.navigate("PyoncordCustomPage",{...n,render:function(){return React.createElement(o,r)}})}var Kt=s(()=>{"use strict"});var yt={};m(yt,{EventEmitter:()=>V,assets:()=>N,awaitUntil:()=>F,findInReactTree:()=>A,findInTree:()=>z,lazyNavigate:()=>j,proxyLazy:()=>w});var L=s(()=>{"use strict";et();Gt();ot();Vt();Yt();Kt();at()});async function U(){try{await F(function(){return wt.getCurrentUser?.()}),wt.getCurrentUser().flags|=1,wt._dispatcher._actionHandlers._computeOrderedActionHandlers("OVERLAY_INITIALIZE").forEach(function(t){let{name:e,actionHandler:n}=t;e.includes?.("Experiment")&&n?.({serializedExperimentStore:ye.getSerializedState(),user:{flags:1}})})}catch(t){console.error("An error occurred while patching experiments",t)}}var wt,ye,Wt=s(()=>{"use strict";g();L();wt=q("UserStore"),ye=q("ExperimentStore")});function H(){let t=y(function(e){return e?.dispatch&&e._actionHandlers?._orderedActionHandlers},function(e){Jt.before(e,"dispatch",function(n){if(n[0].type==="IDLE")return[{type:"THIS_TYPE_DOES_NOT_EXIST"}]})});return function(){return t(),Jt.unpatchAllAndStop()}}var Jt,Xt=s(()=>{"use strict";S();g();Jt=new h("idle-patcher")});var qt={};m(qt,{default:()=>Zt});function Zt(){return React.createElement(we,{style:{flex:1},contentContainerStyle:{paddingBottom:38}},React.createElement(xe,{title:"Settings",titleStyleType:"no_border"},React.createElement(ve,{label:"Trigger Discord's experiments menu",subLabel:"Enables the experiments menu in Discord's settings, which only staff has access to.",leading:React.createElement(be.Icon,{source:ht("ic_badge_staff")}),value:!0,onValueChange:function(){}})))}var we,xe,be,ve,Qt=s(()=>{"use strict";D();et();({ScrollView:we}=ReactNative),{FormSection:xe,FormRow:be,FormSwitchRow:ve}=P});function _e(){let{FormSection:t,FormRow:e,FormIcon:n}=P,r=Z.useNavigation(),o="Pyoncord (daa1bd3) ".trimEnd();return React.createElement(t,{key:"Pyoncord",title:o},React.createElement(e,{label:"General",leading:React.createElement(n,{source:N.getAssetIDByName("settings")}),trailing:e.Arrow,onPress:function(){return j(r,Promise.resolve().then(()=>(Qt(),qt)),"Pyoncord")}}))}function $(){let t=y(function(n){return n.default?.name==="getScreens"},function(n){k.after(n,"default",function(r,o){return Object.assign(o,{PyoncordCustomPage:{title:"Pyoncord",render:function(a){let{render:i,...u}=a,c=Z.useNavigation();return React.useEffect(function(){c.setOptions({...u})},[]),React.createElement(i,null)}}})})}),e=y(function(n){return n.default?.name==="UserSettingsOverviewWrapper"},function(n){let r=k.after(n,"default",function(o,a){let i=A(a.props.children,function(u){return u.type?.name==="UserSettingsOverview"});k.after(i.type.prototype,"renderSupportAndAcknowledgements",function(u,c){let{props:{children:f}}=c;try{let l=f.findIndex(function(_){return _?.type?.name==="UploadLogsButton"});l!==-1&&f.splice(l,1)}catch{}}),k.after(i.type.prototype,"render",function(u,c){let f=[X.Messages.BILLING_SETTINGS,X.Messages.PREMIUM_SETTINGS];try{let l=A(c.props.children,function(p){return p?.children?.[1]?.type===P.FormSection}).children,_=l.findIndex(function(p){return f.includes(p?.props.label)});l.splice(-~_||4,0,React.createElement(_e,null))}catch(l){console.error("An error occurred while trying to append Pyoncord's settings section. "+l?.stack)}}),r()})});return function(){t(),e(),k.unpatchAllAndStop()}}var k,te=s(()=>{"use strict";S();g();D();L();k=new h("settings-patcher")});var bt={};m(bt,{getCurrentTheme:()=>xt});function xt(){throw new Error("Not implemented")}var vt=s(()=>{"use strict"});async function Et(){}var _t,ee=s(()=>{"use strict";S();g();vt();_t=new h("theme-patcher")});var St={};m(St,{patchChatInput:()=>C,patchExperiments:()=>U,patchIdle:()=>H,patchSettings:()=>$,patchTheme:()=>Et});var Pt=s(()=>{"use strict";$t();Wt();Xt();te();ee()});var It={};m(It,{Patcher:()=>lt});var ne=s(()=>{"use strict";S()});var re={};m(re,{api:()=>It,debug:()=>pt,default:()=>Ee,metro:()=>ft,patches:()=>St,themes:()=>bt,utils:()=>yt});async function Ee(){ut(),tt();let t=[dt(),U(),C(),H(),$()];return await Promise.all(t),function(){console.log("Unloading Pyoncord..."),t.forEach(async function(e){return(await e)?.()})}}var oe=s(()=>{"use strict";mt();g();Pt();et();ne();mt();g();Pt();vt();L()});g();console.log(`Pyon! (Pyoncord, hash=daa1bd3, dev=${!1})`);async function Se(){try{window.React=E("createElement"),window.ReactNative=E("View"),window.pyoncord={...await Promise.resolve().then(()=>(oe(),re))},pyoncord.unload=await pyoncord.default(),delete pyoncord.default}catch(t){t=t?.stack??t,alert([`Failed to load Pyoncord.
`,"Build Hash: daa1bd3",`Debug Build: ${!1}`,`Build Number: ${nativeModuleProxy.RTNClientInfoManager?.Build}`,t].join(`
`)),console.error(t)}}Se();})();
//# sourceURL=pyoncord
